import numpy as np
from matplotlib import pyplot as plt, patches

#1 data = Height/Width relation
#2 data = Blob/Fit rectangle
#3 data = Blob/Square
#4 data = CenterMass-CenterSquare

AttackData1 = [0.8350066845628096, 0.7293244623021933, 0.6411225760151901, 0.8138151932896647, 0.8125973831685519, 0.9367228330770702, 0.9729801726927219, 0.8037930383511128, 0.6979166243818333, 0.8163327407409994, 0.8484411329111147, 0.7937741658997481, 0.7880146173241394, 0.8051036725350141, 0.8350126062641402, 0.7668855579609338, 0.7924559832284874, 0.778760988652953, 0.8439656395972058, 0.8574099125895228, 0.7832734411265864, 0.7542578953766267, 0.6687226026230454, 0.6598011841848084, 0.5095144140176534, 0.907245565126575, 0.848877871970721, 0.7864553450848191, 0.9112220953294217, 0.8109720020148022, 0.7773239440039655, 0.8053207238626705, 0.813109504474218, 0.7074131527795562]
AttackData2 = [0.4532671902227056, 0.4306852184238592, 0.49377847872577013, 0.5030467525114032, 0.54250797675563, 0.37527875045334713, 0.36140189167088727, 0.40734732652368993, 0.3458132476249234, 0.47577013007978947, 0.46302607073379903, 0.4771782769116666, 0.4733579186623867, 0.5016037036669578, 0.4725904462084767, 0.4630476164998313, 0.47191654018702733, 0.455802446728202, 0.4775086989625898, 0.48470763412602474, 0.46450783677014196, 0.46407764150520253, 0.4540830594736744, 0.38268459623528495, 0.45339123885510507, 0.4189124522435007, 0.4624941262979197, 0.4646937508754475, 0.4698120521457216, 0.47066211069745223, 0.47740554484860126, 0.4914848603183961, 0.4785364344903625, 0.428662441390087]
AttackData3 = [0.37848113372896175, 0.31410926534848377, 0.3165725302615275, 0.40938709012880575, 0.44084056225969054, 0.35153217431828215, 0.3516368749694163, 0.32742294525067955, 0.24134881444890557, 0.3883867342507363, 0.39285036402076634, 0.3787717887410372, 0.3730129591320917, 0.4038429839794327, 0.39461898018407304, 0.35510452974195356, 0.3739730858556967, 0.3549611640444895, 0.40300093453319163, 0.41559313020746924, 0.36383665173721574, 0.35003422517306276, 0.3036556053382707, 0.25249574976532624, 0.23100937138599678, 0.38005646447421415, 0.39260102973073596, 0.36546088420350903, 0.42810312256723987, 0.38169379418482524, 0.37109876101107675, 0.39580294347915423, 0.38910252312131777, 0.3032414491419432]
AttackData4 = [10.0, 17.26267650163207, 10.44030650891055, 6.0827625302982185, 6.0, 12.649110640673518, 15.556349186104047, 13.601470508735444, 15.03329637837291, 10.19803902718557, 12.206555615733702, 10.19803902718557, 11.180339887498949, 10.44030650891055, 11.180339887498949, 10.63014581273465, 12.206555615733702, 12.08304597359457, 12.165525060596437, 8.54400374531753, 13.038404810405298, 11.704699910719626, 12.529964086141668, 8.246211251235321, 12.649110640673518, 13.038404810405298, 13.038404810405298, 10.77032961426901, 8.94427190999916, 11.180339887498947, 11.180339887498949, 8.06225774829855, 12.206555615733702, 14.317821063276352]
AttackAllData = [AttackData1,AttackData2,AttackData3,AttackData4]

CancelData1 = [0.9354838598726289, 0.7777777288831726, 0.9327547999429197, 0.953939363999887, 0.9080460547011348, 0.8747826336524667, 0.8915929689861067, 0.8161289963340143, 0.8868778317750861, 0.8738062158893891, 0.8941925205745518, 0.8887559536976778, 0.8085106276697801, 0.9045936036147696, 0.989389995199776, 0.9256900596335014, 0.8985507849314914, 0.9671441428764201, 0.9090909090909091, 0.8628158466595671, 0.9347014897217343, 0.8852459016393444, 0.8190475595909219, 0.8045454874449098, 0.9824561772357481, 0.9285714285714286, 0.9616402650025587, 0.9759999404952691, 0.8928571428571428, 0.9003895427685976, 0.9316851527238807, 0.8275862068965518, 0.8620689655172414, 0.9134752109638486]
CancelData2 = [0.7317158781556735, 0.7734084194517086, 0.7674545625799285, 0.7218028606393885, 0.7136622371811091, 0.6943554998746205, 0.7274037079070316, 0.7049280790133141, 0.7687892997080911, 0.7707222218118732, 0.701538996608493, 0.773323531156963, 0.7825434004322082, 0.7743486751462627, 0.7866889305103624, 0.7159762082153414, 0.7611513967586668, 0.6950617383769699, 0.7325454545454545, 0.6481049320433827, 0.6805417074184578, 0.7012750455373407, 0.7009205481197934, 0.6581922460135926, 0.6707440688625964, 0.7287087912087912, 0.6938502454663813, 0.73459001796819, 0.7166071428571429, 0.6681494926882113, 0.6983371401902777, 0.7347341954022989, 0.7632758620689655, 0.7177073453227996]
CancelData3 = [0.6845083940271597, 0.6015398439802742, 0.7158469269845221, 0.6885561618116373, 0.6480381788614916, 0.6074101328713957, 0.6485480315843329, 0.5753122456128007, 0.6818221872169986, 0.6734618681432952, 0.6273109236586903, 0.6872958924502623, 0.6326946558622887, 0.7004708585048804, 0.7783421571813643, 0.6627720588790276, 0.6839331850092012, 0.6722248892087891, 0.6659504132231405, 0.5591952056652525, 0.6361033477418051, 0.6208008599838754, 0.5740872644046482, 0.5295456014014659, 0.6589766537982978, 0.6766581632653061, 0.6672343339223813, 0.7169598138253721, 0.6398278061224489, 0.601594816222609, 0.6506303451109371, 0.6080558858501783, 0.6579964328180737, 0.6556078686790482]
CancelData4 = [0.0, 2.0, 1.0, 3.0, 2.23606797749979, 2.8284271247461903, 2.8284271247461903, 2.23606797749979, 2.0, 1.0, 1.0, 2.23606797749979, 1.0, 1.4142135623730951, 2.8284271247461903, 3.1622776601683795, 1.0, 2.23606797749979, 1.0, 4.123105625617661, 2.23606797749979, 0.0, 1.0, 2.0, 2.23606797749979, 1.0, 2.8284271247461903, 1.0, 1.0, 3.6055512754639896, 1.0, 3.1622776601683795, 2.23606797749979, 1.0]
CancelAllData = [CancelData1,CancelData2,CancelData3,CancelData4]

MoveData1 = [0.670511663448645, 0.7530927157929637, 0.6332082537047387, 0.9718018864829631, 0.9655891162869423, 0.9917478122922885, 0.8214850096259142, 0.9050313038058371, 0.7146659415726044, 0.6112931784747544, 0.5973406167360062, 0.6245609150078846, 0.9483477595464417, 0.6465863387778218, 0.6761868072551735, 0.8488805811052119, 0.7798466378663612, 0.732542840476155, 0.9377592684429318, 0.9722311355929294, 0.719883840439215, 0.6202062904091157, 0.6653878380755129, 0.6525503033425039, 0.6570756034571723, 0.6476944828268268, 0.6371266598267888, 0.6832136086338391, 0.6435678236205239, 0.6222172134047805, 0.6308457584695459, 0.5987912881550346, 0.566711561835829, 0.6705762474282945, 0.9698795857358657, 0.8351013183451661, 0.9960744007903888, 0.7901786013485808, 0.6623376187254485, 0.6561403743529024, 0.6541412938611189, 0.651933634484487, 0.624220208614324]
MoveData2 = [0.44865646226005473, 0.40962558220276085, 0.43353763127824124, 0.434801961416509, 0.49785476761944797, 0.46559774998698056, 0.47283441734097537, 0.5364808245815457, 0.4480219802518178, 0.46696898863923236, 0.44892000791035025, 0.43532682910361076, 0.39333849175199925, 0.4254284212653382, 0.42004607141175837, 0.5317576823305199, 0.4547465817305255, 0.47523240970287345, 0.45936164952181524, 0.4247186214624883, 0.4772220249796334, 0.43746060084386884, 0.45425105919043357, 0.46418027848936794, 0.3993592482588514, 0.4500525551093615, 0.4250386193037937, 0.4583737031125879, 0.4519706741275913, 0.47202960066802085, 0.4244864245447931, 0.443378976117956, 0.44002657322152516, 0.4860438227068179, 0.4061232449060147, 0.44318285942120933, 0.41850640074772977, 0.3999571323436424, 0.45783039205398013, 0.4430632291734513, 0.4578450150969025, 0.4280480306347935, 0.4295093564677587]
MoveData3 = [0.3008293908269735, 0.30848604215935105, 0.27451960641698403, 0.42254136635105594, 0.4807231451049038, 0.4617555499577998, 0.38842638588081463, 0.4855319401378669, 0.32018605036188813, 0.2854549573144178, 0.26815815439030144, 0.2718881227124321, 0.37302167739638503, 0.2750762053179838, 0.28402961192799553, 0.4513987703838924, 0.35463259284377074, 0.3481280992900708, 0.4307706444063159, 0.4129246676519385, 0.3435444240845175, 0.27131581644951874, 0.30225313021823447, 0.302900981533845, 0.2624092190458875, 0.2914965569264499, 0.2708034358144162, 0.31316715180640714, 0.29087378308859496, 0.29370494277222725, 0.2677854604519857, 0.2654914682505312, 0.2493681465596383, 0.32592944271644114, 0.3938906445271511, 0.3701025901706323, 0.4168635123517373, 0.3160375674346885, 0.30323829165317173, 0.2907116730518742, 0.2994953305633513, 0.27905890834566793, 0.2681084200961084]
MoveData4 = [13.416407864998739, 12.165525060596437, 13.038404810405298, 8.06225774829855, 8.0, 12.08304597359457, 13.892443989449806, 7.280109889280519, 11.40175425099138, 11.0, 12.041594578792294, 14.142135623730951, 13.341664064126334, 14.0, 15.0, 7.615773105863909, 9.219544457292887, 9.433981132056603, 10.77032961426901, 15.03329637837291, 11.313708498984761, 13.416407864998739, 16.401219466856723, 15.556349186104047, 13.601470508735444, 14.142135623730951, 12.806248474865697, 12.806248474865697, 14.866068747318504, 14.7648230602334, 20.248456731316587, 14.7648230602334, 15.556349186104047, 10.77032961426901, 13.038404810405298, 14.560219778561038, 14.212670403551897, 16.1245154965971, 13.601470508735444, 17.26267650163207, 13.038404810405298, 14.7648230602334, 14.317821063276352]
MoveAllData = [MoveData1,MoveData2,MoveData3,MoveData4]

RollData1 = [0.4699874030295963, 0.420461305602779, 0.3728020849958849, 0.4612540526675952, 0.3910919977129175, 0.3756060185362564, 0.3756573913358989, 0.35048462553338333, 0.3929520894815239, 0.32790700014683366, 0.3382445129658767, 0.3383734170757488, 0.4025186576470344, 0.4040021420497288, 0.4475459818238182, 0.31027717694484935, 0.41384777251244714]
RollData2 = [0.6169710251075514, 0.5566389709297139, 0.5194170301313952, 0.6560461033327435, 0.5422232111408158, 0.5560492026649402, 0.5192436363572128, 0.6395322638002926, 0.5369056074511029, 0.647902330074159, 0.6080269559650981, 0.5764488213926149, 0.6283937894421947, 0.6439132044412241, 0.6308806021696158, 0.5531807910866354, 0.5799845569233776]
RollData3 = [0.289968609834806, 0.23404514846649485, 0.1936397518153545, 0.3026039238990119, 0.21205915885137472, 0.20885542712323812, 0.1950577099017167, 0.22414622599456246, 0.21097818030225773, 0.21245170944276115, 0.20566178159053916, 0.19505495746390708, 0.2529402246000053, 0.26014231388835946, 0.2823480785116024, 0.17163937419847974, 0.24002531697435842]
RollData4 = [6.0827625302982185, 3.0, 4.123105625617661, 4.47213595499958, 5.099019513592785, 5.099019513592785, 6.324555320336759, 7.0710678118654755, 4.242640687119286, 4.123105625617661, 8.06225774829855, 7.615773105863909, 5.385164807134505, 6.0827625302982185, 5.099019513592785, 7.615773105863909, 4.123105625617661]
RollAllData = [RollData1,RollData2,RollData3,RollData4]

ImageData1 = [1.2298466498022689]
ImageData2 = [0.4785364344903625]
ImageData3 = [0.38910252312131777]
ImageData4 = [12.206555615733702]


AttackFeatures = []
CancelFeatures = []
MoveFeatures = []
RollFeatures = []
ImageFeature = []

fig, ax = plt.subplots(1)


for i in range (len(ImageData1)):
    ImageFeature.append([ImageData1[i], ImageData2[i],ImageData3[i],ImageData4[i]])


for i in range (len(AttackData1)):
    AttackFeatures.append([AttackData1[i],AttackData2[i],AttackData3[i],AttackData4[i]])
    plt.scatter(AttackData1[i],AttackData3[i], c="yellow")


for i in range (len(CancelData1)):
    CancelFeatures.append([CancelData1[i],CancelData2[i],CancelData3[i],CancelData4[i]])
    plt.scatter(CancelData1[i],CancelData3[i], c="red")


for i in range (len(MoveData1)):
    MoveFeatures.append([MoveData1[i],MoveData2[i],MoveData3[i],MoveData4[i]])
    plt.scatter(MoveData1[i],MoveData3[i], c="purple")


for i in range (len(RollData1)):
    RollFeatures.append([RollData1[i],RollData2[i],RollData3[i],RollData4[i]])
    plt.scatter(RollData1[i],RollData3[i], c="blue")


#knn = NearestNeighbors(n_neighbors=4)
#knn.fit(AttackFeatures)
#distance_mat, neighbours_mat = knn.kneighbors(AttackFeatures)

def PointWithinRegion(point=(0, 0), center=(0, 0), width=.1, height=.1):
    isWithin = False

    #ax.set_aspect('equal')

    # Some test points
    x = point[0]
    y = point[1]

    angle = 0

    g_ellipse = patches.Ellipse(center, width, height, angle=angle, fill=False, edgecolor='green',
                                linewidth=2)
    ax.add_patch(g_ellipse)
    color = 'black'

    cos_angle = np.cos(np.radians(180. - angle))
    sin_angle = np.sin(np.radians(180. - angle))

    xc = x - center[0]
    yc = y - center[1]

    xct = xc * cos_angle - yc * sin_angle
    yct = xc * sin_angle + yc * cos_angle

    rad_cc = (xct ** 2 / (width / 2.) ** 2) + (yct ** 2 / (height / 2.) ** 2)

    if rad_cc <= 1.:
        color = 'green'
        isWithin = True
    ax.scatter(x, y, c=color, linewidths=0.3)
    print(isWithin)
    return isWithin

#Cancel gesture
#PointWithinRegion((1.1,0.7),(1.123,0.721),0.6,0.25)

#Roll gesture
#PointWithinRegion((1.1,0.7),(2.7,0.61),1.4,0.25)

#Attack gesture
#PointWithinRegion((1.1,0.7),(1.45,0.44),1.4,0.25)

#Move gesture
#PointWithinRegion((0.38,0.40),(0.38,0.45),0.6,0.25)

plt.show()

